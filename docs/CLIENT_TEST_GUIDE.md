# 🧪 クライアント向けテスト作業ガイド

## 📋 目次

1. [テスト環境について](#テスト環境について)
2. [テストアカウント情報](#テストアカウント情報)
3. [基本機能テスト](#基本機能テスト)
4. [薬局側機能テスト](#薬局側機能テスト)
5. [薬剤師側機能テスト](#薬剤師側機能テスト)
6. [重要なフロー確認](#重要なフロー確認)
7. [UI/UX確認項目](#uiux確認項目)
8. [エラーケース確認](#エラーケース確認)
9. [報告方法](#報告方法)

---

## 🌐 テスト環境について

### 本番環境URL
- **フロントエンド**: https://yaku-navi.com
- **バックエンドAPI**: https://yaku-navi.com/api

### 推奨ブラウザ
- Google Chrome（最新版）
- Firefox（最新版）
- Safari（最新版）

---

## 🔑 テストアカウント情報

### 共通パスワード
すべてのテストアカウントのパスワード: **`password123`**

### 薬局アカウント

| メールアドレス | 薬局名 | 用途 |
|--------------|--------|------|
| pharmacy1@test.com | 羽曳野薬局 | 基本機能テスト |
| pharmacy2@test.com | テスト薬局 新宿店 | 求人作成・編集テスト |
| pharmacy3@test.com | サンプル薬局 渋谷店 | 応募管理テスト |
| pharmacy.dummy1@test.com | さくら薬局 駅前店 | 追加テスト用 |
| pharmacy.dummy2@test.com | すみれ薬局 中央店 | 追加テスト用 |

### 薬剤師アカウント

| メールアドレス | 氏名 | 資格証明書 | 用途 |
|--------------|------|-----------|------|
| pharmacist1@test.com | 田中 一郎 | ✅ 確認済み | 基本機能テスト |
| pharmacist2@test.com | 鈴木 美咲 | ⏳ 確認中 | 資格確認フローテスト |
| pharmacist3@test.com | 佐藤 健太 | ✅ 確認済み | 応募・契約フローテスト |
| pharmacist.dummy1@test.com | ランダム | ランダム | 追加テスト用 |

---

## ✅ 基本機能テスト

### 1. ログイン機能

#### 薬局側ログイン
- [ ] 薬局ログインページ（`/pharmacy/login`）にアクセス
- [ ] 正しいメールアドレス・パスワードでログインできる
- [ ] 間違ったパスワードでエラーが表示される
- [ ] ログイン後、ダッシュボードに遷移する

#### 薬剤師側ログイン
- [ ] 薬剤師ログインページ（`/pharmacist/login`）にアクセス
- [ ] 正しいメールアドレス・パスワードでログインできる
- [ ] 間違ったパスワードでエラーが表示される
- [ ] ログイン後、ダッシュボードに遷移する

### 2. ログアウト機能
- [ ] ログアウトボタンをクリックできる
- [ ] ログアウト後、適切なログインページに遷移する
  - 薬局側: `/pharmacy/login`
  - 薬剤師側: `/pharmacist/login`

### 3. 新規登録機能（オプション）
- [ ] 薬局新規登録フォームが正しく動作する
- [ ] 薬剤師新規登録フォームが正しく動作する
- [ ] 必須項目のバリデーションが機能する

---

## 🏥 薬局側機能テスト

### 1. ダッシュボード
- [ ] ダッシュボードが正しく表示される
- [ ] 統計情報（応募数、契約数など）が表示される
- [ ] サイドバーのメニューが正しく動作する

### 2. 求人管理

#### 求人一覧
- [ ] 求人一覧ページ（`/pharmacy/jobs`）が表示される
- [ ] 求人カードが正しく表示される
- [ ] ステータス（公開中、下書きなど）が正しく表示される

#### 求人作成
- [ ] 「新規求人作成」ボタンが動作する
- [ ] 求人作成フォームが正しく表示される
- [ ] 必須項目の入力ができる
- [ ] 求人を保存できる
- [ ] 保存後、求人一覧に反映される

#### 求人編集
- [ ] 既存の求人を編集できる
- [ ] 変更内容が正しく保存される

#### 求人削除（オプション）
- [ ] 求人を削除できる
- [ ] 削除確認ダイアログが表示される

### 3. 応募管理

#### 応募一覧
- [ ] 応募一覧ページ（`/pharmacy/applications`）が表示される
- [ ] 応募者情報が正しく表示される
- [ ] **重要**: 支払い前は薬剤師の名前が「応募者A」「応募者B」など匿名表示される
- [ ] 支払い後は薬剤師の実名が表示される

#### 応募詳細
- [ ] 応募詳細ページ（`/pharmacy/applications/[id]`）が表示される
- [ ] 薬剤師のプロフィール情報が正しく表示される
- [ ] **重要**: 支払い前は薬剤師の名前が「応募者」と表示される
- [ ] 支払い後は薬剤師の実名が表示される
- [ ] 最寄駅が正しく表示される（ハードコードされていない）
- [ ] ステータス表示が削除されている（以前は表示されていた）

### 4. メッセージ機能

#### メッセージ一覧
- [ ] メッセージ一覧ページ（`/pharmacy/messages`）が表示される
- [ ] 会話リストが正しく表示される
- [ ] **重要**: 支払い前は薬剤師の名前が「応募者A」「応募者B」など匿名表示される
- [ ] 支払い後は薬剤師の実名が表示される

#### メッセージ送信
- [ ] メッセージを送信できる
- [ ] 送信したメッセージが正しく表示される
- [ ] 受信したメッセージが正しく表示される

#### 初回出勤日の提案
- [ ] 「初回出勤日の候補を提案」ボタンが表示される
- [ ] ボタンをクリックして日付を提案できる
- [ ] **重要**: 1回のみ提案可能（2回目以降はボタンが非表示になる）
- [ ] 既に提案済みの場合は警告メッセージが表示される

### 5. 支払い管理

#### 請求書一覧
- [ ] 請求書一覧ページ（`/pharmacy/payments`）が表示される
- [ ] 請求書のステータスが正しく表示される
- [ ] 「詳細を見る」ボタンが動作する

#### 請求書詳細・支払い報告
- [ ] 請求書詳細ページ（`/pharmacy/payments/[id]`）が表示される
- [ ] **重要**: サイドバーが非表示になっている（設定、ログアウトボタン、タイトルが非表示）
- [ ] 請求書の内容が正しく表示される
- [ ] 「支払い報告」ボタンが動作する
- [ ] 支払い報告フォームが正しく表示される
- [ ] 支払い報告を送信できる
- [ ] **重要**: 支払い報告後、請求書一覧ページ（`/pharmacy/payments`）にリダイレクトされる
- [ ] 「印刷 / PDF保存」ボタンが動作する
- [ ] 印刷プレビューが正しく表示される
- [ ] **重要**: 「PDFダウンロード」ボタンは表示されない（削除済み）

### 6. 採用薬剤師管理

#### 採用薬剤師一覧
- [ ] 採用薬剤師一覧ページ（`/pharmacy/pharmacist-profiles`）が表示される
- [ ] 支払い確認済みの薬剤師のみが表示される
- [ ] 薬剤師の基本情報（氏名、メール、電話番号）が表示される

#### 薬剤師詳細
- [ ] 「詳細を見る」ボタンが動作する
- [ ] モーダルまたは詳細ページが表示される
- [ ] 薬剤師の詳細プロフィールが正しく表示される
- [ ] 連絡先情報（メール、電話番号）が表示される

### 7. 契約管理
- [ ] 契約一覧ページが表示される
- [ ] 契約詳細ページが表示される
- [ ] 契約書類のダウンロードが動作する
- [ ] 薬剤師の連絡先情報が表示される（契約がactiveの場合）

### 8. プロフィール管理
- [ ] プロフィール編集ページ（`/pharmacy/profile`）が表示される
- [ ] プロフィール情報を編集できる
- [ ] 変更内容が正しく保存される

---

## 👨‍⚕️ 薬剤師側機能テスト

### 1. ダッシュボード
- [ ] ダッシュボードが正しく表示される
- [ ] 統計情報（応募数、契約数など）が表示される
- [ ] サイドバーのメニューが正しく動作する

### 2. 求人検索・応募

#### 求人一覧
- [ ] 求人一覧ページ（`/pharmacist/jobs`）が表示される
- [ ] 求人カードが正しく表示される
- [ ] 求人詳細ページに遷移できる

#### 求人詳細・応募
- [ ] 求人詳細ページ（`/pharmacist/jobs/[id]`）が表示される
- [ ] 求人情報が正しく表示される
- [ ] 「応募する」ボタンが動作する
- [ ] **重要**: 応募フォームがモーダル形式で表示される
- [ ] 応募フォーム内にすべての入力項目が含まれている
  - 基本情報（最寄駅）
  - 経歴（勤務経験の種類）
  - 自己紹介・アピールポイント（カバーレター）
- [ ] 未確認の資格証明書がある場合、警告メッセージが表示される
- [ ] 応募を送信できる
- [ ] **重要**: 応募の取り下げボタンは表示されない（機能削除済み）

### 3. 応募管理
- [ ] 応募一覧ページ（`/pharmacist/applications`）が表示される
- [ ] 応募済み求人が正しく表示される
- [ ] 応募ステータスが正しく表示される
- [ ] **重要**: 「取り下げ」ボタンは表示されない

### 4. メッセージ機能
- [ ] メッセージ一覧ページが表示される
- [ ] 会話リストが正しく表示される
- [ ] メッセージを送受信できる
- [ ] 初回出勤日の提案メッセージを受信できる

### 5. 契約管理

#### 契約一覧
- [ ] 契約一覧ページ（`/pharmacist/contracts`）が表示される
- [ ] 契約カードが正しく表示される
- [ ] 契約ステータスが正しく表示される

#### 契約詳細
- [ ] 契約詳細ページ（`/pharmacist/contracts/[id]`）が表示される
- [ ] 契約情報が正しく表示される
- [ ] 契約書類のダウンロードが動作する
- [ ] **重要**: 「請求書ダウンロード」ボタンは表示されない（削除済み）
- [ ] **重要**: 「労働条件通知書を表示」ボタンが表示される（契約がactiveの場合）

#### 労働条件通知書
- [ ] 労働条件通知書ページ（`/pharmacist/contracts/[id]/labor-conditions`）が表示される
- [ ] **重要**: サイドバーが非表示になっている
- [ ] 労働条件通知書の内容が正しく表示される
- [ ] 薬剤師情報、薬局情報、労働条件が正しく表示される
- [ ] 「印刷 / PDF保存」ボタンが動作する
- [ ] 印刷プレビューが正しく表示される

### 6. プロフィール管理
- [ ] プロフィール編集ページ（`/pharmacist/profile`）が表示される
- [ ] プロフィール情報を編集できる
- [ ] 変更内容が正しく保存される
- [ ] 資格証明書のアップロードが動作する

---

## 🔄 重要なフロー確認

### フロー1: 応募から契約成立まで

1. **薬剤師が求人に応募**
   - [ ] 薬剤師が求人詳細ページで「応募する」をクリック
   - [ ] 応募フォーム（モーダル）が表示される
   - [ ] 必要事項を入力して応募を送信
   - [ ] 応募が成功する

2. **薬局が応募を確認**
   - [ ] 薬局の応募一覧に新しい応募が表示される
   - [ ] 応募者名が「応募者A」など匿名表示される
   - [ ] 応募詳細ページでプロフィールを確認できる

3. **メッセージ交換**
   - [ ] 薬局と薬剤師がメッセージを交換できる
   - [ ] 薬局が初回出勤日の候補を提案できる（1回のみ）
   - [ ] 薬剤師が提案に返信できる

4. **オファー送信・承認**
   - [ ] 薬局がオファーを送信できる
   - [ ] 薬剤師がオファーを承認できる

5. **契約成立**
   - [ ] 契約レコードが作成される
   - [ ] 労働条件通知書と請求書が生成される

### フロー2: 支払い報告から承認まで

1. **薬局が支払い報告**
   - [ ] 薬局が請求書詳細ページで「支払い報告」をクリック
   - [ ] 支払い報告フォームが表示される
   - [ ] 支払い情報を入力して送信
   - [ ] 支払い報告後、請求書一覧ページにリダイレクトされる
   - [ ] ステータスが「支払い報告済み」になる

2. **管理者が支払いを承認**（管理者側で実行）
   - [ ] シリアルコンソールから支払い承認スクリプトを実行
   - [ ] 支払いステータスが「確認済み」になる
   - [ ] 契約ステータスが「active（勤務中）」になる

3. **個人情報の開示確認**
   - [ ] 薬局側で薬剤師の実名が表示される
   - [ ] 薬局側で薬剤師の連絡先（メール、電話）が表示される
   - [ ] メッセージ画面で薬剤師の実名が表示される
   - [ ] 採用薬剤師一覧に薬剤師が表示される

### フロー3: 労働条件通知書の確認

1. **薬剤師が労働条件通知書を表示**
   - [ ] 契約詳細ページで「労働条件通知書を表示」をクリック
   - [ ] 労働条件通知書ページが表示される
   - [ ] サイドバーが非表示になっている
   - [ ] 労働条件が正しく表示される

2. **印刷・PDF保存**
   - [ ] 「印刷 / PDF保存」ボタンをクリック
   - [ ] ブラウザの印刷プレビューが表示される
   - [ ] PDFとして保存できる

---

## 🎨 UI/UX確認項目

### レスポンシブデザイン
- [ ] PC画面（1920x1080）で正しく表示される
- [ ] タブレット画面（768x1024）で正しく表示される
- [ ] スマートフォン画面（375x667）で正しく表示される

### ローディング状態
- [ ] データ読み込み中にローディング表示が表示される
- [ ] ボタンクリック時に適切なフィードバックがある

### エラーメッセージ
- [ ] エラーメッセージが分かりやすく表示される
- [ ] エラーメッセージが日本語で表示される

### 成功メッセージ
- [ ] 操作成功時に適切なメッセージが表示される
- [ ] メッセージが適切なタイミングで消える

### ナビゲーション
- [ ] サイドバーのメニューが正しく動作する
- [ ] パンくずリストが正しく表示される（該当ページ）
- [ ] 戻るボタンが正しく動作する

### フォーム
- [ ] 必須項目が明確に表示される
- [ ] バリデーションエラーが適切に表示される
- [ ] フォーム送信時に適切なフィードバックがある

---

## ⚠️ エラーケース確認

### 認証エラー
- [ ] ログインしていない状態で保護されたページにアクセスすると、ログインページにリダイレクトされる
- [ ] トークンが期限切れの場合、適切にログアウトされる

### 権限エラー
- [ ] 薬局アカウントで薬剤師専用ページにアクセスできない
- [ ] 薬剤師アカウントで薬局専用ページにアクセスできない

### データ不存在エラー
- [ ] 存在しないIDのページにアクセスすると、404エラーが表示される
- [ ] エラーメッセージが分かりやすく表示される

### ネットワークエラー
- [ ] ネットワークエラー時に適切なメッセージが表示される
- [ ] リトライ機能が動作する（該当機能）

---

## 📝 報告方法

### 発見した問題の報告

以下の情報を含めて報告してください：

1. **問題の概要**
   - 何が起こったか
   - 期待される動作と実際の動作の違い

2. **再現手順**
   - 問題を再現するための手順
   - ステップバイステップで記載

3. **環境情報**
   - 使用したブラウザとバージョン
   - OS情報
   - 画面サイズ（レスポンシブの問題の場合）

4. **スクリーンショット**
   - 可能であれば、問題のスクリーンショットを添付

5. **エラーメッセージ**
   - ブラウザのコンソールに表示されたエラー（F12で確認）
   - 画面上に表示されたエラーメッセージ

### 報告テンプレート

```
【問題報告】

問題の概要:
[問題の説明]

再現手順:
1. [手順1]
2. [手順2]
3. [手順3]

期待される動作:
[期待される動作]

実際の動作:
[実際の動作]

環境情報:
- ブラウザ: [ブラウザ名とバージョン]
- OS: [OS名とバージョン]
- 画面サイズ: [画面サイズ]

スクリーンショット:
[スクリーンショットを添付]

エラーメッセージ:
[エラーメッセージ]
```

---

## ✅ チェックリスト（まとめ）

テスト完了後、以下のチェックリストを確認してください：

### 必須確認項目
- [ ] ログイン・ログアウトが正しく動作する
- [ ] 薬局側の求人作成・編集が動作する
- [ ] 薬剤師側の求人検索・応募が動作する
- [ ] 応募フォームがモーダル形式で表示される
- [ ] 支払い前は薬剤師名が匿名表示される
- [ ] 支払い後は薬剤師名が実名表示される
- [ ] 初回出勤日の提案は1回のみ可能
- [ ] 支払い報告後、請求書一覧にリダイレクトされる
- [ ] 請求書詳細ページでサイドバーが非表示
- [ ] 労働条件通知書ページでサイドバーが非表示
- [ ] 印刷・PDF保存機能が動作する
- [ ] 応募の取り下げ機能が削除されている

### 推奨確認項目
- [ ] レスポンシブデザインが正しく動作する
- [ ] エラーメッセージが適切に表示される
- [ ] ローディング状態が適切に表示される
- [ ] 全体的なUI/UXが使いやすい

---

## 📞 サポート

テスト中に問題が発生した場合や、質問がある場合は、開発チームまでご連絡ください。

---

**最終更新**: 2026年1月28日

