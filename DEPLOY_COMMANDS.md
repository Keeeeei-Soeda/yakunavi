# ğŸš€ ã‚µãƒ¼ãƒãƒ¼å´ãƒ‡ãƒ—ãƒ­ã‚¤ã‚³ãƒãƒ³ãƒ‰ï¼ˆå®Ÿè¡Œç”¨ï¼‰

## ç¾åœ¨ã®çŠ¶æ³
- âœ… `git pull origin main` å®Œäº†
- âš ï¸ ç¾åœ¨ `~/yaku_navi/frontend` ã«ã„ã‚‹
- âš ï¸ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã«æˆ»ã‚‹å¿…è¦ãŒã‚ã‚‹

---

## ğŸ“‹ å®Ÿè¡Œã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ï¼ˆé †ç•ªã«å®Ÿè¡Œï¼‰

### ã‚¹ãƒ†ãƒƒãƒ—1: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã«ç§»å‹•

```bash
cd ~/yaku_navi
```

### ã‚¹ãƒ†ãƒƒãƒ—2: ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã‚’ç¢ºèª

```bash
ls -la
# backend ã¨ frontend ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
```

### ã‚¹ãƒ†ãƒƒãƒ—3: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ä¾å­˜é–¢ä¿‚ã‚’æ›´æ–°

```bash
cd backend
npm install
cd ..
```

### ã‚¹ãƒ†ãƒƒãƒ—4: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ä¾å­˜é–¢ä¿‚ã‚’æ›´æ–°ã¨ãƒ“ãƒ«ãƒ‰

```bash
cd frontend
npm install
npm run build
cd ..
```

### ã‚¹ãƒ†ãƒƒãƒ—5: PM2ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å†èµ·å‹•

```bash
# PM2ã®çŠ¶æ…‹ã‚’ç¢ºèª
pm2 list

# ã™ã¹ã¦ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å†èµ·å‹•
pm2 restart all

# ã¾ãŸã¯å€‹åˆ¥ã«å†èµ·å‹•
# pm2 restart backend
# pm2 restart frontend

# ãƒ­ã‚°ã‚’ç¢ºèª
pm2 logs --lines 50
```

---

## ğŸ¯ ä¸€æ‹¬å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰ï¼ˆã‚³ãƒ”ãƒ¼&ãƒšãƒ¼ã‚¹ãƒˆç”¨ï¼‰

```bash
cd ~/yaku_navi && \
cd backend && npm install && cd .. && \
cd frontend && npm install && npm run build && cd .. && \
pm2 restart all && \
pm2 logs --lines 50
```

---

## ğŸ” ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### å•é¡Œ1: `npm install`ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹å ´åˆ

```bash
# node_modulesã‚’å‰Šé™¤ã—ã¦å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
rm -rf node_modules package-lock.json
npm install
```

### å•é¡Œ2: `npm run build`ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹å ´åˆ

```bash
# .nextãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’å‰Šé™¤ã—ã¦å†ãƒ“ãƒ«ãƒ‰
rm -rf .next
npm run build
```

### å•é¡Œ3: PM2ã®ãƒ—ãƒ­ã‚»ã‚¹ãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆ

```bash
# PM2ã®ãƒ—ãƒ­ã‚»ã‚¹ä¸€è¦§ã‚’ç¢ºèª
pm2 list

# ãƒ—ãƒ­ã‚»ã‚¹ãŒå­˜åœ¨ã—ãªã„å ´åˆã¯ã€æ–°è¦ã«èµ·å‹•
cd ~/yaku_navi/backend
pm2 start npm --name "backend" -- start
cd ../frontend
pm2 start npm --name "frontend" -- start
pm2 save
```

### å•é¡Œ4: ãƒ•ã‚©ãƒ³ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®ç¢ºèª

```bash
# ãƒ•ã‚©ãƒ³ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ãŒæ­£ã—ãé…ç½®ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
ls -lh ~/yaku_navi/backend/fonts/NotoSansJP-VariableFont_wght.ttf

# ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºãŒç´„8.7MBã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª
```

---

## âœ… ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã®ç¢ºèª

### 1. PM2ã®çŠ¶æ…‹ç¢ºèª

```bash
pm2 status
# ã™ã¹ã¦ã®ãƒ—ãƒ­ã‚»ã‚¹ãŒ "online" ã«ãªã£ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
```

### 2. ãƒ­ã‚°ã®ç¢ºèª

```bash
# ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’ç¢ºèª
pm2 logs --err --lines 100

# ã™ã¹ã¦ã®ãƒ­ã‚°ã‚’ç¢ºèª
pm2 logs --lines 100
```

### 3. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å‹•ä½œç¢ºèª

- ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚¢ã‚¯ã‚»ã‚¹
- è«‹æ±‚æ›¸è©³ç´°ãƒšãƒ¼ã‚¸ã§ã‚µã‚¤ãƒ‰ãƒãƒ¼ãŒéè¡¨ç¤ºã«ãªã£ã¦ã„ã‚‹ã‹ç¢ºèª
- å°åˆ·ãƒœã‚¿ãƒ³ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹ã‹ç¢ºèª

---

## ğŸ“ æ³¨æ„äº‹é …

1. **ãƒ“ãƒ«ãƒ‰æ™‚é–“**: `npm run build` ã¯æ•°åˆ†ã‹ã‹ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™
2. **ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡**: ãƒ“ãƒ«ãƒ‰ä¸­ã¯ãƒ¡ãƒ¢ãƒªã‚’å¤šãä½¿ç”¨ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™
3. **ãƒ€ã‚¦ãƒ³ã‚¿ã‚¤ãƒ **: PM2ã®å†èµ·å‹•ä¸­ã¯ä¸€æ™‚çš„ã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒåˆ©ç”¨ã§ããªããªã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™

---

**å®Ÿè¡Œç’°å¢ƒ**: Xserver VPS (Ubuntu 25.04)
**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‘ã‚¹**: `~/yaku_navi`

