# 🚀 管理者システムデプロイチェックリスト

## 📋 デプロイ前の確認事項

### ✅ 実装完了機能

1. **管理者認証システム**
   - ✅ ログインページ (`/admin/auth/login`)
   - ✅ JWT認証
   - ✅ セッション管理

2. **ダッシュボード**
   - ✅ 統計情報の表示
   - ✅ 各管理ページへのリンク

3. **薬剤師管理**
   - ✅ 一覧表示
   - ✅ 検索・フィルター
   - ✅ ステータス管理（有効化/停止）
   - ✅ 詳細ページ

4. **薬局管理**
   - ✅ 一覧表示
   - ✅ 検索・フィルター
   - ✅ ステータス管理（有効化/停止）
   - ✅ 詳細ページ

5. **証明書管理**
   - ✅ 一覧表示
   - ✅ 承認・差し戻し機能

6. **契約管理**
   - ✅ 一覧表示
   - ✅ 検索・フィルター

7. **求人管理**
   - ✅ 一覧表示
   - ✅ 検索・フィルター

8. **支払い管理**
   - ✅ 一覧表示
   - ✅ 検索・フィルター
   - ✅ 支払い確認機能

9. **ペナルティ管理**
   - ✅ 一覧表示
   - ✅ 解決機能

10. **UI/UX**
    - ✅ サイドバーナビゲーション
    - ✅ レスポンシブデザイン
    - ✅ エラーハンドリング

## 🔧 デプロイ手順

### 1. ローカルでの最終確認

```bash
# バックエンドのビルド確認
cd backend
npm run build

# フロントエンドのビルド確認
cd ../frontend
npm run build
```

### 2. Gitコミット（必要に応じて）

```bash
git add .
git commit -m "管理者システム実装完了: サイドバー、詳細ページ、求人管理、支払い管理を追加"
git push origin main
```

### 3. サーバーでのデプロイ

```bash
# SSH接続
ssh root@x85-131-247-170

# プロジェクトディレクトリに移動
cd ~/yaku_navi

# 最新のコードを取得
git pull origin main

# バックエンドの更新
cd backend
npm install
npm run build
cd ..

# フロントエンドの更新
cd frontend
npm install
npm run build
cd ..

# PM2でアプリケーションを再起動
pm2 restart yaku-navi-backend
pm2 restart yaku-navi-frontend

# ステータス確認
pm2 status

# ログ確認
pm2 logs --lines 50
```

### 4. デプロイ後の確認

#### バックエンド確認
```bash
curl http://localhost:5001/health
curl http://localhost:5001/api/admin/dashboard/stats
```

#### フロントエンド確認
ブラウザで以下にアクセス：
- `https://yaku-navi.com/admin/auth/login`
- 管理者ログイン（admin@yakunavi.com / Admin@2026!）
- ダッシュボードが表示されることを確認
- 各管理ページが正常に動作することを確認

## 📝 管理者アカウント情報

### メイン管理者
- **メール**: `admin@yakunavi.com`
- **パスワード**: `Admin@2026!`

### サポート管理者
- **メール**: `support@yakunavi.com`
- **パスワード**: `Support@2026!`

## ⚠️ 注意事項

1. **データベースマイグレーション**: 管理者テーブルは既に存在することを確認
2. **環境変数**: `.env`ファイルに`JWT_SECRET`が設定されていることを確認
3. **CORS設定**: 本番環境のURLが許可されていることを確認
4. **PM2設定**: プロセスが正しく起動していることを確認

## 🐛 トラブルシューティング

### 問題1: 管理者ログインできない
- データベースに管理者アカウントが存在するか確認
- `backend/scripts/create-admin.ts`を実行して管理者を作成

### 問題2: APIエラー（401/403）
- JWT_SECRETが正しく設定されているか確認
- トークンが正しく生成されているか確認

### 問題3: ページが表示されない
- フロントエンドのビルドが成功しているか確認
- PM2のログを確認

## 📊 デプロイ日時

- **デプロイ日**: 2026年2月15日
- **バージョン**: v1.0.0 (管理者システム)

